"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[171],{733:function(t,e,s){s.r(e),s.d(e,"MyQRCode",(function(){return R}));var i=s(1),n=s(292),r=s(61),o=s(545),u=s(511),a=(s(13),s(14)),h=s(16),c=s(531),l=s.n(c),d=s(550),f=s(18),p=s(19),v=s(59),g=s(53),k=a.Z+"/qr/",b=class extends n.a{addSoftKeys(t,e){t.setLeftAsBack(),"success"===this.Xa().status&&t.setRightLabel(591,()=>{(0,p.g)({text:592,left:864,onSoftLeft:"CLOSE",right:591,onSoftRight:()=>this.Xb()})})}constructor(t,e){super(t,e),this.XZ=!1,this.state={data:{status:"loading"}}}componentDidUpdate(t,e,s){t.isRevoking&&!this.props.isRevoking&&this.Xc(),super.componentDidUpdate(t,e,s)}componentDidMount(){this.XZ=!0,this.props.isRevoking||this.Xc(),super.componentDidMount()}componentWillUnmount(){this.XZ=!1,super.componentWillUnmount()}render(){return(0,i.b)(2,u.a,{title:(0,i.b)(2,f.b,{l10n:590}),children:this.Xd()})}Xd(){var t=this.Xa();switch(t.status){case"loading":return(0,i.b)(2,d.a,{subtitle:596});case"revoking":return(0,i.b)(2,d.a,{subtitle:595});case"success":return(0,i.b)(2,o.a,{withWhatsappIcon:!0,data:t.code,text:(0,i.b)(2,f.b,{l10n:587}),qrOptions:{errorCorrectLevel:l.a.ErrorCorrectLevel.M,typeNumber:4}});default:return t.status,(0,i.f)(1,"div","XE",(0,i.b)(2,f.b,{l10n:586}),2)}}Xc(){this.props.backend.sendAndReceive("backend","queryQRCode",{}).then(t=>{this.XZ&&(t.success?this.Xe(t.value):this.setState({data:{status:"failure"}}))})}Xb(){this.props.backend.spinUntilJobOverlay(h.e.revokeQRCode(),t=>this.XZ?(t.success?(this.Xe(t.value),(0,p.e)({text:594})):(0,p.e)({text:593}),null):null,{left:861,onSoftLeft:t=>t.goBack(),title:595,onBack:t=>t.goBack()})}Xe(t){this.setState({data:{status:"success",code:k+t}})}Xa(){return this.props.isRevoking?{status:"revoking"}:this.state.data}},R=(0,v.f)((0,r.e)(b),t=>{var e=h.g.revokeQRCode(),s=(0,g.h)(t,"revokeQRCode",e);return{isRevoking:null!=s&&"finished"!==s.step.status}},(t,e)=>({backend:e,isRevoking:t.isRevoking}))}}]);