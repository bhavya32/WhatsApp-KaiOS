"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[91],{639:function(r,t,i){i.r(t);var e=i(30),n=i(4),a=i(6),o=i(88),s=i(51),u=i(39),p=i(16),d=i(72),c=i(186),m={404:(0,d.c)("not-a-participant"),406:(0,d.c)("is-superadmin")},f=new s.a("demoteGroupParticipantsReplyParser",r=>({success:!0,id:r.attrString("id"),participants:r.child("demote").mapChildren(r=>{var t=(0,d.e)(r,m);return{jid:r.attrPhoneUserJid("jid"),error:t}})})),l={401:(0,d.d)("not-an-admin"),403:(0,d.d)("not-in-group"),404:(0,d.d)("group-not-found"),500:(0,d.d)("unknown")};t.default=(0,o.c)().finalStep("demoteGroupParticipants",(r,t,i)=>{var o=i.jobStartTime,s=r.groupJid,m=r.participants,j=(0,n.w)("iq",{to:(0,n.g)(s),type:"set",xmlns:"w:g2",id:(0,n.u)()},(0,n.w)("demote",null,m.map(r=>(0,n.w)("participant",{jid:(0,n.g)(r)}))));return(0,e.b)(j,f).then(r=>{if(!r.success)return(0,d.f)(r,l);var t=r.result,i=[],e=[];return t.participants.forEach(r=>{r.error?i.push({jid:r.jid,error:r.error}):e.push(r.jid)}),(0,c.o)("demote",s,{id:t.id,participants:e,author:a.t.get(),ts:o}).then(()=>{if(i.length)return(0,u.b)().waitUntilPersisted(p.e.queryGroup(s))}).then(()=>({failures:i}))})}).end()}}]);