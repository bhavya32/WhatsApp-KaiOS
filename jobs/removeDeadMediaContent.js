"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[110],{669:function(e,t,d){d.r(t);var a=d(88),_=d(22),l=d(238),i=d(81),r=d(119),c=d(12),o=d(89),n=new i.a;function h(){return __LOG__(2)`deleteDetachedMedia requesting batch`,(0,_.e)().then(_.D).then(e=>{var t=e.media,d=e.maybeMore;return __LOG__(2)`deleteDetachedMedia got ${t.length} media`,t.reduce((e,t)=>{var d=t.id,a=t.fsPath;return e.then(()=>{a&&(__LOG__(2)`deleteDetachedMedia checking page to delete ${d}`,(0,o.c)("deleteDetachedMedia")),__LOG__(2)`deleteDetachedMedia deleting media ${d}`;var e=[(0,r.getChunkTable)().deleteAllByMedia(d)];return null!=a&&e.push((0,c.e)("page","deletePath",{path:a}).then(()=>{__LOG__(2)`deleteDetachedMedia successfully removed file ${a}`}).catch(e=>{__LOG__(3)`deleteDetachedMedia failed to remove media from the gallery: ${e}`})),Promise.all(e).then(()=>(__LOG__(2)`deleteDetachedMedia deleted media ${d}`,(0,_.Cb)(d)))})},Promise.resolve()).then(()=>{if(d)return __LOG__(2)`deleteDetachedMedia looping`,h();__LOG__(2)`deleteDetachedMedia success`})}).then(()=>(0,l.k)().then(e=>{if(e&&e.length>0)return Promise.all(e.map(e=>()=>(function(e){return(0,c.e)("page","deletePath",{path:e}).then(()=>(__LOG__(2)`doDeletePath successfully removed file ${e}`,(0,l.q)(e))).catch(e=>{__LOG__(3)`doDeletePath failed to remove media from the gallery: ${e}`})})(e))).then(()=>{})}))}t.default=(0,a.c)().finalStep("removeDeadMediaContent",()=>n.enqueue(h)).end()}}]);