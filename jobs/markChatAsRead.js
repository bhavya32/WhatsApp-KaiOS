"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[100],{543:function(r,t,e){function a(r,t){for(var e=[],a=0;r.length>a;)e.push(r.slice(a,a+t)),a+=t;return e}e.d(t,"a",(function(){return a}))},652:function(r,t,e){e.r(t);var a=e(88),n=e(22),i=e(30),l=e(11),u=e(6),s=e(7),c=e(4),p=e(543);function v(r,t,e,a){return(0,p.a)(e,20).map(e=>{var n=null;e.length>1&&(n=(0,c.w)("list",null,e.slice(1).map(r=>(0,c.w)("item",{id:(0,c.b)(r)}))));var l=(0,c.w)("receipt",{to:(0,c.g)(r),type:"read",id:(0,c.b)(e[0]),t:(0,c.b)(String(a)),participant:t?(0,c.g)(t):c.c},n);return(0,i.g)(l,{id:e[0],class:"receipt",type:"read",from:r,participant:t?(0,s.e)(t):null})})}t.default=(0,a.c)().step("gatherMsgs",r=>{var t=r.chat,e=r.startMsg,a=r.endMsg;return(0,n.xc)(t,e,a)}).finalStep("updateDbAndSend",(r,t,e)=>{var a=t.chat,d=e.jobStartTime;if(r){var f=(0,n.Ab)(r.chatId,r.upTo);if("all"!==u.k.get().readReceipts&&null===(0,s.p)(a))return f;var o=[];if(r.type)if("user"===r.type){var m=r.unread,g=r.userJid,h=r.broadcast,y=v(g,null,m,d);o.push(...y),(0,l.x)(h).forEach(r=>{var t=v(r,g,h[r],d);o.push(...t)})}else{r.type;var _=r.unread,S=r.groupJid;(0,l.x)(_).forEach(r=>{var t=v(S,r,_[r],d);o.push(...t)})}else{var A=r.byAuthor,b=[];(0,l.x)(A).forEach(r=>{(0,p.a)(A[r],20).forEach(t=>{b.push({author:r,ids:t})})});var k=b.map(r=>{var t=r.author,e=r.ids,n=t!==a?t:null,l=null;e.length>1&&(l=(0,c.w)("list",null,e.slice(1).map(r=>(0,c.w)("item",{id:(0,c.b)(r)}))));var u=String(d),p=(0,c.w)("receipt",{to:(0,c.g)(a),type:"read",id:(0,c.b)(e[0]),t:(0,c.b)(u),participant:n?(0,c.g)(n):c.c},l);return(0,i.g)(p,{id:e[0],class:"receipt",type:"read",from:a,participant:n?(0,s.e)(n):null})});o.push(...k)}return Promise.all([f,...o]).then(()=>{})}__LOG__(2)`markChatAsRead no change`}).end()}}]);