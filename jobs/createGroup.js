"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[81],{638:function(r,e,t){t.r(e);var i=t(30),a=t(4),n=t(7),o=t(51),p=t(39),s=t(16),u=t(22),d=t(88),c=t(72),l=t(3),m=t(17),f=t(256),g={superadmin:"superadmin",admin:"admin"},j={401:(0,c.c)("add-not-allowed"),406:(0,c.c)("business-not-allowed"),500:(0,c.c)("too-many-participants"),403:(0,c.b)("add-request-required",r=>{var e=r.child("add_request");return{code:e.attrString("code"),expiration:e.attrTime("expiration")}})},v=new o.a("createGroupReplyParser",r=>{var e,t=r.child("group"),i=(0,n.o)(t.attrString("id")+"@g.us");if("group"!==i.jidType)throw new Error("createGroupReplyParser fail on group jid");var a,o=i.groupJid;if(w()){var p=t.maybeChild("ephemeral");p&&(a=p.attrInt("expiration"))}return{success:!0,jid:o,title:t.attrString("subject"),titleTs:t.attrTime("s_t"),creatorJid:t.attrPhoneUserJid("creator"),creationTs:t.attrTime("creation"),participants:t.mapChildrenWithTag("participant",r=>{var e=(0,c.e)(r,j);return{jid:r.attrPhoneUserJid("jid"),error:e,type:r.attrEnumOrDefault("type",g,"participant")}}),expiration:null!=(e=a)?e:null,growthLocked:(0,f.b)(t)}}),y={406:(0,c.d)("subject-too-long"),429:(0,c.d)("rate-limit"),500:(0,c.d)("too-many-groups")};function w(){return(0,m.a)("disappearing_mode")}e.default=(0,d.c)().step("createGroup",{code:r=>{var e=r.title,t=r.key,n=r.participants,o=r.expiration,p=n.map(r=>(0,a.w)("participant",{jid:(0,a.g)(r)}));w()&&null!=o&&p.push((0,a.w)("ephemeral",{expiration:(0,a.f)(o)}));var s=(0,a.w)("iq",{to:a.e,type:"set",xmlns:"w:g2",id:(0,a.u)()},(0,a.w)("create",{subject:(0,a.b)(e),key:(0,a.b)(t)},p));return(0,i.b)(s,v).then(r=>{if(!r.success)return(0,c.f)(r,y);var e=r.result,t=e.jid,i=[],a=[];return e.participants.forEach(r=>{r.error?i.push({jid:r.jid,error:r.error}):a.push({jid:r.jid,type:r.type})}),(0,u.mb)({jid:t,title:e.title,titleTs:e.titleTs,description:null,descriptionId:null,participants:a,creatorJid:e.creatorJid,creationTs:e.creationTs,locked:!1,announcement:!1,support:!1,expiration:e.expiration,growthLocked:e.growthLocked}).then(()=>({result:{groupJid:t},failures:i}))})},stopRetryIf:{timePassedSeconds:l.b,onStopRetry:()=>(0,c.d)("no-network")}}).finalStep("setIcon",(r,e)=>{var t=e.profilePicture,i=e.blob;if(!t&&!i)return r;if(r.error)return r;var a=i||new Blob([t]);return(0,p.b)().waitUntilPersisted(s.e.setGroupPicture(r.result.groupJid,a)).then(()=>r)}).end()}}]);